# OFlair - Control-M to Airflow Converter

![OFlair Banner](public/globe.svg) *PLACEHOLDER: ‡∏£‡∏π‡∏õ Banner ‡∏´‡∏£‡∏∑‡∏≠ Logo ‡∏Ç‡∏≠‡∏á‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Ñ*

**OFlair** ‡∏Ñ‡∏∑‡∏≠‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏°‡∏∑‡∏≠‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ä‡πà‡∏ß‡∏¢‡πÅ‡∏õ‡∏•‡∏á Job Definitions ‡∏à‡∏≤‡∏Å **BMC Control-M** ‡πÑ‡∏õ‡πÄ‡∏õ‡πá‡∏ô **Apache Airflow DAGs** ‡πÇ‡∏î‡∏¢‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥ ‡∏ä‡πà‡∏ß‡∏¢‡∏•‡∏î‡πÄ‡∏ß‡∏•‡∏≤‡πÅ‡∏•‡∏∞‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô‡πÇ‡∏Ñ‡πâ‡∏î Python ‡∏î‡πâ‡∏ß‡∏¢‡∏°‡∏∑‡∏≠ ‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡πÅ‡∏õ‡∏•‡∏á‡πÄ‡∏á‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏Ç (Conditions) ‡πÅ‡∏•‡∏∞ Schedule ‡∏ó‡∏µ‡πà‡∏ã‡∏±‡∏ö‡∏ã‡πâ‡∏≠‡∏ô‡πÉ‡∏´‡πâ‡∏Å‡∏•‡∏≤‡∏¢‡πÄ‡∏õ‡πá‡∏ô Airflow Standard

## üåü ‡∏ü‡∏µ‡πÄ‡∏à‡∏≠‡∏£‡πå‡∏´‡∏•‡∏±‡∏Å (Key Features)

*   **Smart Parsing:** ‡∏≠‡πà‡∏≤‡∏ô‡πÑ‡∏ü‡∏•‡πå XML ‡∏ó‡∏µ‡πà Export ‡∏°‡∏≤‡∏à‡∏≤‡∏Å Control-M ‡πÑ‡∏î‡πâ‡∏ó‡∏±‡πâ‡∏á‡πÅ‡∏ö‡∏ö Folder ‡∏õ‡∏Å‡∏ï‡∏¥‡πÅ‡∏•‡∏∞ SMART Folder
*   **Automatic DAG Generation:** ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÑ‡∏ü‡∏•‡πå Python DAG ‡∏ï‡∏≤‡∏°‡∏°‡∏≤‡∏ï‡∏£‡∏ê‡∏≤‡∏ô Airflow (‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö‡∏ó‡∏±‡πâ‡∏á Airflow 2.x ‡πÅ‡∏•‡∏∞ 3.x)
*   **Dependency Resolution:** ‡πÅ‡∏õ‡∏•‡∏á‡πÄ‡∏á‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏Ç `INCOND`/`OUTCOND` ‡πÄ‡∏õ‡πá‡∏ô‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏±‡∏°‡∏û‡∏±‡∏ô‡∏ò‡πå `>>` ‡πÉ‡∏ô Airflow ‡πÅ‡∏•‡∏∞‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö Cross-DAG Dependencies (‡∏ú‡πà‡∏≤‡∏ô `ExternalTaskSensor`)
*   **Operator Mapping:** ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÉ‡∏ä‡πâ Airflow Operator ‡∏ó‡∏µ‡πà‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏™‡∏°‡∏Å‡∏±‡∏ö Job Type ‡πÇ‡∏î‡∏¢‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥ (‡πÄ‡∏ä‡πà‡∏ô Bash, Kubernetes, SSH, SQL, AWS, SAP, etc.)
*   **Advanced Scheduling:** ‡πÅ‡∏õ‡∏•‡∏á‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡πÄ‡∏ß‡∏•‡∏≤ (Schedule) ‡∏Ç‡∏≠‡∏á Control-M ‡πÉ‡∏´‡πâ‡πÄ‡∏õ‡πá‡∏ô Cron Expression ‡∏´‡∏£‡∏∑‡∏≠ Airflow Timetable
*   **Modern UI:** ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏ú‡πà‡∏≤‡∏ô‡πÄ‡∏ß‡πá‡∏ö‡∏≠‡∏¥‡∏ô‡πÄ‡∏ó‡∏≠‡∏£‡πå‡πÄ‡∏ü‡∏ã‡∏ó‡∏µ‡πà‡∏™‡∏ß‡∏¢‡∏á‡∏≤‡∏° ‡∏ó‡∏±‡∏ô‡∏™‡∏°‡∏±‡∏¢ (‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏î‡πâ‡∏ß‡∏¢ Next.js ‡πÅ‡∏•‡∏∞ Tailwind CSS)

---

## üöÄ ‡∏Å‡∏≤‡∏£‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô (Getting Started)

### ‡∏™‡∏¥‡πà‡∏á‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ (Prerequisites)
*   **Node.js**: ‡πÄ‡∏ß‡∏≠‡∏£‡πå‡∏ä‡∏±‡πà‡∏ô 18 ‡∏´‡∏£‡∏∑‡∏≠‡πÉ‡∏´‡∏°‡πà‡∏Å‡∏ß‡πà‡∏≤
*   **npm** ‡∏´‡∏£‡∏∑‡∏≠ **yarn** ‡∏´‡∏£‡∏∑‡∏≠ **pnpm**
*   **Git**

### ‡∏Å‡∏≤‡∏£‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á (Installation)

1.  **Clone ‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Ñ:**
    ```bash
    git clone https://github.com/bangmodtech/oflair.git
    cd oflair
    ```

2.  **‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á Dependencies:**
    ```bash
    npm install
    ```

3.  **‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏ê‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• (SQLite):**
    ```bash
    npx prisma migrate dev
    ```

4.  **‡∏£‡∏±‡∏ô‡πÇ‡∏õ‡∏£‡πÅ‡∏Å‡∏£‡∏° (Development Mode):**
    ```bash
    npm run dev
    ```

5.  **‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏ú‡πà‡∏≤‡∏ô Browser:**
    ‡πÄ‡∏õ‡∏¥‡∏î [http://localhost:3000](http://localhost:3000)

---

## üìñ ‡∏Ñ‡∏π‡πà‡∏°‡∏∑‡∏≠‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô (Usage Guide)

### 1. ‡∏Å‡∏≤‡∏£‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏°‡πÑ‡∏ü‡∏•‡πå (Prepare Files)
Export Job ‡∏à‡∏≤‡∏Å Control-M ‡πÄ‡∏õ‡πá‡∏ô‡πÑ‡∏ü‡∏•‡πå **XML** ‡πÇ‡∏î‡∏¢‡πÄ‡∏•‡∏∑‡∏≠‡∏Å Job ‡∏´‡∏£‡∏∑‡∏≠ Folder ‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏¢‡πâ‡∏≤‡∏¢

### 2. ‡∏Å‡∏≤‡∏£‡πÅ‡∏õ‡∏•‡∏á‡πÑ‡∏ü‡∏•‡πå (Conversion Process)
1.  ‡πÑ‡∏õ‡∏ó‡∏µ‡πà‡∏´‡∏ô‡πâ‡∏≤ **Convert** ‡πÉ‡∏ô‡πÄ‡∏°‡∏ô‡∏π‡∏´‡∏•‡∏±‡∏Å
2.  ‡∏≠‡∏±‡∏õ‡πÇ‡∏´‡∏•‡∏î‡πÑ‡∏ü‡∏•‡πå XML ‡∏ó‡∏µ‡πà‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏°‡πÑ‡∏ß‡πâ
3.  ‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏∞‡∏ó‡∏≥‡∏Å‡∏≤‡∏£ Validate ‡πÑ‡∏ü‡∏•‡πå‡πÅ‡∏•‡∏∞‡πÅ‡∏™‡∏î‡∏á‡∏à‡∏≥‡∏ô‡∏ß‡∏ô Jobs ‡∏ó‡∏µ‡πà‡∏û‡∏ö
4.  ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏Å‡∏≤‡∏£‡πÅ‡∏õ‡∏•‡∏á (Conversion Options):
    *   **Airflow Version:** ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏ß‡∏≠‡∏£‡πå‡∏ä‡∏±‡πà‡∏ô‡∏õ‡∏•‡∏≤‡∏¢‡∏ó‡∏≤‡∏á (‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥ 2.9 ‡∏´‡∏£‡∏∑‡∏≠ 3.0)
    *   **TaskFlow API:** ‡πÄ‡∏õ‡∏¥‡∏î‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏ñ‡πâ‡∏≤‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡πÇ‡∏Ñ‡πâ‡∏î‡∏™‡πÑ‡∏ï‡∏•‡πå‡πÉ‡∏´‡∏°‡πà (`@task`)
    *   **DAG Prefix/Suffix:** ‡∏ï‡∏±‡πâ‡∏á‡∏ä‡∏∑‡πà‡∏≠‡∏ô‡∏≥‡∏´‡∏ô‡πâ‡∏≤/‡∏ï‡πà‡∏≠‡∏ó‡πâ‡∏≤‡∏¢ DAG ID
5.  ‡∏Å‡∏î‡∏õ‡∏∏‡πà‡∏° **Convert**

### 3. ‡∏Å‡∏≤‡∏£‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡πÅ‡∏•‡∏∞‡∏î‡∏≤‡∏ß‡∏ô‡πå‡πÇ‡∏´‡∏•‡∏î (Review & Export)
*   ‡∏î‡∏π‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÇ‡∏Ñ‡πâ‡∏î (Code Preview) ‡πÑ‡∏î‡πâ‡∏ó‡∏±‡∏ô‡∏ó‡∏µ‡∏ö‡∏ô‡∏´‡∏ô‡πâ‡∏≤‡πÄ‡∏ß‡πá‡∏ö
*   ‡∏î‡∏π‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô (Report) ‡∏ß‡πà‡∏≤‡∏°‡∏µ Job ‡πÑ‡∏´‡∏ô‡∏ó‡∏µ‡πà‡πÅ‡∏õ‡∏•‡∏á‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ ‡∏´‡∏£‡∏∑‡∏≠‡∏°‡∏µ Warning ‡∏≠‡∏∞‡πÑ‡∏£‡∏ö‡πâ‡∏≤‡∏á
*   ‡∏Å‡∏î **Download** ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏£‡∏±‡∏ö‡πÑ‡∏ü‡∏•‡πå `.zip` ‡∏ó‡∏µ‡πà‡∏õ‡∏£‡∏∞‡∏Å‡∏≠‡∏ö‡∏î‡πâ‡∏ß‡∏¢‡πÑ‡∏ü‡∏•‡πå Python DAGs ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î

---

## üõ†Ô∏è ‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏Ç‡∏±‡πâ‡∏ô‡∏™‡∏π‡∏á (Advanced Usage)

### ‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£ Dependencies ‡∏Ç‡πâ‡∏≤‡∏° DAG (Cross-DAG Dependencies)
OFlair ‡∏â‡∏•‡∏≤‡∏î‡∏û‡∏≠‡∏ó‡∏µ‡πà‡∏à‡∏∞‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤ Job ‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡∏£‡∏≠‡πÄ‡∏á‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏Ç‡∏à‡∏≤‡∏Å Folder ‡∏≠‡∏∑‡πà‡∏ô‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà
*   ‡∏´‡∏≤‡∏Å‡∏û‡∏ö‡∏ß‡πà‡∏≤‡πÄ‡∏á‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏Ç‡∏°‡∏≤‡∏à‡∏≤‡∏Å Job ‡πÉ‡∏ô‡πÑ‡∏ü‡∏•‡πå‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏Å‡∏±‡∏ô‡πÅ‡∏ï‡πà‡∏Ñ‡∏ô‡∏•‡∏∞ Folder (‡∏ã‡∏∂‡πà‡∏á‡∏ñ‡∏π‡∏Å‡πÅ‡∏¢‡∏Å‡πÄ‡∏õ‡πá‡∏ô‡∏Ñ‡∏ô‡∏•‡∏∞ DAG) ‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏∞‡∏™‡∏£‡πâ‡∏≤‡∏á `ExternalTaskSensor` ‡πÉ‡∏´‡πâ‡πÇ‡∏î‡∏¢‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥

### Operator Mapping Logic
‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏∞‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö `JOB_TYPE`, `CMDLINE` ‡πÅ‡∏•‡∏∞ `FILENAME` ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏•‡∏∑‡∏≠‡∏Å Operator ‡∏î‡∏±‡∏á‡∏ô‡∏µ‡πâ:

| Control-M Job Type | Airflow Operator | ‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏ |
|-------------------|------------------|----------|
| OS / Command | `BashOperator` | Default |
| File Watcher | `FileSensor` | |
| Kubernetes / Docker | `KubernetesPodOperator` | |
| SSH / Remote | `SSHOperator` | |
| Database / SQL | `SQLExecuteQueryOperator` | |
| Python Script | `PythonOperator` | |
| Dummy / Box | `EmptyOperator` | |
| AWS Lambda | `LambdaInvokeFunctionOperator` | |
| Spark | `SparkSubmitOperator` | |
| SAP HANA | `SapHanaOperator` | |
| SFTP | `SFTPOperator` | |

### ‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏±‡∏ö‡πÅ‡∏ï‡πà‡∏á‡πÄ‡∏ó‡∏°‡πÄ‡∏û‡∏•‡∏ï (Custom Templates)
‡∏£‡∏∞‡∏ö‡∏ö‡πÉ‡∏ä‡πâ **Handlebars** ‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÇ‡∏Ñ‡πâ‡∏î Python
*   ‡πÑ‡∏ü‡∏•‡πå‡πÄ‡∏ó‡∏°‡πÄ‡∏û‡∏•‡∏ï‡∏´‡∏•‡∏±‡∏Å‡∏≠‡∏¢‡∏π‡πà‡∏ó‡∏µ‡πà `src/lib/templates/` (‡∏≠‡∏≤‡∏à‡∏ï‡πâ‡∏≠‡∏á‡πÅ‡∏Å‡πâ‡πÇ‡∏Ñ‡πâ‡∏î‡∏´‡∏≤‡∏Å‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏±‡∏ö‡πÇ‡∏Ñ‡∏£‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÉ‡∏´‡∏ç‡πà)
*   ‡∏Ñ‡∏∏‡∏ì‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç Logic ‡∏Å‡∏≤‡∏£ Mapping ‡πÑ‡∏î‡πâ‡∏ó‡∏µ‡πà `src/lib/converter/index.ts` ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô `convertJobToTask`

---

## üèóÔ∏è ‡πÇ‡∏Ñ‡∏£‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Ñ (Project Structure)

```text
/src
  ‚îú‚îÄ‚îÄ app/              # Next.js App Router (Pages & API)
  ‚îú‚îÄ‚îÄ components/       # UI Components
  ‚îÇ   ‚îú‚îÄ‚îÄ converter/    # Components ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏´‡∏ô‡πâ‡∏≤‡πÅ‡∏õ‡∏•‡∏á‡πÑ‡∏ü‡∏•‡πå
  ‚îÇ   ‚îî‚îÄ‚îÄ ui/           # Shared UI (Button, Card, Input)
  ‚îú‚îÄ‚îÄ lib/
  ‚îÇ   ‚îú‚îÄ‚îÄ converter/    # Core Logic ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡πÅ‡∏õ‡∏•‡∏á
  ‚îÇ   ‚îú‚îÄ‚îÄ parser/       # ‡∏ï‡∏±‡∏ß‡∏≠‡πà‡∏≤‡∏ô‡πÑ‡∏ü‡∏•‡πå XML Control-M
  ‚îÇ   ‚îú‚îÄ‚îÄ generator/    # ‡∏ï‡∏±‡∏ß‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÑ‡∏ü‡∏•‡πå Python DAG
  ‚îÇ   ‚îî‚îÄ‚îÄ templates/    # Handlebars Templates
  ‚îú‚îÄ‚îÄ prisma/           # Database Schema (SQLite)
  ‚îî‚îÄ‚îÄ types/            # TypeScript Definitions
```

## üíª Tech Stack

*   **Frontend:** Next.js 16, React 19, Tailwind CSS v4, Lucide React
*   **Backend Logic:** TypeScript, Fast-XML-Parser, Handlebars
*   **Database:** Prisma ORM, SQLite
*   **State Management:** Zustand
*   **Testing:** Vitest

---